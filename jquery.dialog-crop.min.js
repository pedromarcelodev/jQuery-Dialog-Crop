!function(i){i.initDialogCropOptions=function(o){var t={classHide:"dialog-hide",imageClass:"",dialog:{position:{my:"center",at:"center",of:window},close:function(){i(this).addClass(o.classHide).dialog("destroy").html("")}},jcrop:{}};return i.extend({},t,o)},i.fn.dialogCrop=function(o){if(this.length>0){i.dialogCrop={},o=i.initDialogCropOptions(o);var t={dialog:this};i.widget("ui.dialog",i.extend({},i.ui.dialog.prototype,{_title:function(i){var o=this.options.title||"&nbsp;";"title_html"in this.options&&1==this.options.title_html?i.html(o):i.text(o)}})),i('a[data-toggle="dialog-crop"]').click(t,function(t){t.preventDefault();var a=new Image;a.onload=function(){if(i.dialogCrop.originalWidth=this.width,i.dialogCrop.prop=i.dialogCrop.originalWidth/i.dialogCrop.dialogImageWidth,"undefined"!=typeof o.formTarget){var t=i("#jquery-dialog-crop-prop");t.length>0?t.val(i.dialogCrop.prop):i("<input>",{type:"hidden",name:"jquery-dialog-crop-prop",value:i.dialogCrop.prop}).appendTo(o.formTarget)}},a.src=i(this).attr("href"),i("<img>",{id:"dialog-crop-image",src:i(this).attr("href"),"class":o.imageClass}).appendTo(t.data.dialog),i(t.data.dialog).removeClass(o.classHide).dialog(o.dialog),i(function(){i("#dialog-crop-image").Jcrop(o.jcrop)}),i.dialogCrop.dialogImageWidth=i("#dialog-crop-image").width()}),i(window).resize(t,function(t){i(t.data.dialog).dialog("option","position",o.dialog.position)})}return this}}(jQuery);